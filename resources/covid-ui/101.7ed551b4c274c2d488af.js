"use strict";(self.webpackChunkcovid_killer=self.webpackChunkcovid_killer||[]).push([[101],{7101:(Y,A,o)=>{o.r(A),o.d(A,{AuthenticationModule:()=>E});var g=o(8583),d=o(4655),a=o(3679);class q{isErrorState(i,n){return!!(i&&i.invalid&&(i.dirty||i.touched||n&&n.submitted))}}var p=o(2340),t=o(7716),v=o(1841),C=o(7556),N=o(6458),u=o(3738),s=o(8295),c=o(9983),Z=o(1095),h=o(4885);function b(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function x(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA(),t.qZA())}function w(e,i){if(1&e&&(t.TgZ(0,"div",11),t.TgZ(1,"button",12),t._uU(2,"Login"),t.qZA(),t.TgZ(3,"button",13),t._uU(4," Want to Create an Account? "),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.form.invalid)}}function y(e,i){1&e&&(t.TgZ(0,"div",14),t._UZ(1,"mat-spinner",15),t.qZA())}let L=(()=>{class e{constructor(n,r,l,m){this.httpClient=n,this.auth=r,this.router=l,this.snackBar=m,this.form=new a.cw({email:new a.NI("",[a.kI.required,a.kI.email]),password:new a.NI(null,a.kI.required)}),this.matcher=new q,this.isLoading=!1}ngOnInit(){}submit(){this.isLoading=!0,this.form.disable(),this.httpClient.post(`${p.N.apiURL}/auth/login`,this.form.value).subscribe(n=>{this.auth.setToken(null==n?void 0:n.token),this.httpClient.get(`${p.N.apiURL}/auth/getuser`).subscribe(r=>{console.log(r),this.isLoading=!1,this.auth.user$.next(r),this.snackBar.open("Login Successful...","",{duration:3e3,verticalPosition:"top"}),this.router.navigateByUrl("/home")},()=>{this.isLoading=!1,this.form.enable()})},()=>{this.isLoading=!1,this.form.enable()})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.eN),t.Y36(C.e),t.Y36(d.F0),t.Y36(N.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:22,vars:6,consts:[[1,"row"],[1,"col-lg-6","offset-3"],[1,"mt-5"],[1,"example-form","mt-4",3,"formGroup","submit"],["appearance","fill",1,"example-full-width"],["type","email","matInput","","formControlName","email","placeholder","Ex. pat@example.com",3,"errorStateMatcher"],[4,"ngIf"],["appearance","fill",1,"example-full-width","mt-3"],["type","password","matInput","","formControlName","password","placeholder","Password"],["class","d-flex justify-content-start align-items-center mt-3",4,"ngIf"],["class","d-block mt-3",4,"ngIf"],[1,"d-flex","justify-content-start","align-items-center","mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","routerLink","/auth/register","mat-button","","color","accent",1,"ml-2"],[1,"d-block","mt-3"],["diameter","20"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card",2),t.TgZ(3,"mat-card-header"),t.TgZ(4,"mat-card-title"),t._uU(5," Login "),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"form",3),t.NdJ("submit",function(){return r.submit()}),t.TgZ(8,"mat-form-field",4),t.TgZ(9,"mat-label"),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",5),t.TgZ(12,"mat-hint"),t._uU(13,"Errors appear instantly!"),t.qZA(),t.YNc(14,b,2,0,"mat-error",6),t.YNc(15,x,4,0,"mat-error",6),t.qZA(),t.TgZ(16,"mat-form-field",7),t.TgZ(17,"mat-label"),t._uU(18,"Password"),t.qZA(),t._UZ(19,"input",8),t.qZA(),t.YNc(20,w,5,1,"div",9),t.YNc(21,y,2,0,"div",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){let l,m;t.xp6(7),t.Q6J("formGroup",r.form),t.xp6(4),t.Q6J("errorStateMatcher",r.matcher),t.xp6(3),t.Q6J("ngIf",(null==(l=r.form.get("email"))?null:l.hasError("email"))&&!(null!=(l=r.form.get("email"))&&l.hasError("required"))),t.xp6(1),t.Q6J("ngIf",null==(m=r.form.get("email"))?null:m.hasError("required")),t.xp6(5),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading)}},directives:[u.a8,u.dk,u.n5,u.dn,a._Y,a.JL,a.sg,s.KE,s.hX,c.Nt,a.Fj,a.JJ,a.u,s.bx,g.O5,s.TO,Z.lW,d.rH,h.$g],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),e})();var I=o(7441),T=o(2458),f=o(3220);function _(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is "),t.TgZ(2,"strong"),t._uU(3,"required"),t.qZA(),t.qZA())}function k(e,i){if(1&e&&(t.TgZ(0,"div",26),t.TgZ(1,"button",27),t._uU(2,"Create An Account"),t.qZA(),t.TgZ(3,"button",28),t._uU(4," Want to Login? "),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("disabled",n.form.invalid)}}function R(e,i){1&e&&(t.TgZ(0,"div",29),t._UZ(1,"mat-spinner",30),t.qZA())}const M=[{path:"",redirectTo:"/auth/login",pathMatch:"full"},{path:"login",component:L},{path:"register",component:(()=>{class e{constructor(n,r,l,m){this.httpClient=n,this.auth=r,this.router=l,this.snackBar=m,this.form=new a.cw({registerType:new a.NI({value:1,disabled:!0},a.kI.required),email:new a.NI(null,[a.kI.required]),firstName:new a.NI(null,a.kI.required),lastName:new a.NI(null,a.kI.required),dob:new a.NI(null,a.kI.required),password:new a.NI(null,a.kI.required),confirm_password:new a.NI(null,a.kI.required),address1:new a.NI(null,a.kI.required),address2:new a.NI(null,a.kI.required),state:new a.NI(null,a.kI.required),pinCode:new a.NI(null,a.kI.required)}),this.matcher=new q,this.isLoading=!1}ngOnInit(){}register(){var n;const r=this.form.value;r.name=null===(n=r.firstName.toLowerCase()+r.lastName.toLowerCase())||void 0===n?void 0:n.trim(),r.dob=new Date(r.dob).toUTCString(),this.isLoading=!0,this.httpClient.post(`${p.N.apiURL}/auth/register`,r).subscribe(l=>{this.isLoading=!1,l&&l.token&&(this.auth.setToken(l.token),this.httpClient.get(`${p.N.apiURL}/auth/current-user`).subscribe(m=>{this.auth.user$.next(m),this.snackBar.open("Registration Successful, Logging you in to access features...","",{duration:3e3,verticalPosition:"top"}),this.router.navigateByUrl("/home")}))},()=>this.isLoading=!1)}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v.eN),t.Y36(C.e),t.Y36(d.F0),t.Y36(N.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:69,vars:10,consts:[[1,"row"],[1,"col-lg-6","offset-3"],[1,"mt-2","mb-5"],[1,"example-form","mt-4",3,"formGroup","submit"],["appearance","fill",1,"example-full-width","mt-3"],["formControlName","registerType"],[3,"value"],[1,"d-flex","justify-content-between","align-items-center","mt-2"],["appearance","fill",1,"half-width"],["type","text","matInput","","formControlName","firstName","placeholder","First Name"],["type","text","matInput","","formControlName","lastName","placeholder","Last Name"],["appearance","fill",1,"example-full-width"],["type","email","matInput","","formControlName","email","placeholder","Ex. pat@example.com",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","formControlName","dob",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["type","password","matInput","","formControlName","password","placeholder","Password"],["type","password","matInput","","formControlName","confirm_password","placeholder","Confirm Password"],[1,"d-flex","justify-content-between","align-items-center","mt-3"],["type","text","matInput","","formControlName","address1","placeholder","Address 1"],["type","text","matInput","","formControlName","address2","placeholder","Address 2"],["type","text","matInput","","formControlName","state","placeholder","State"],["type","number","matInput","","formControlName","pinCode","placeholder","Pin Code"],["class","d-flex justify-content-start align-items-center mt-3",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"d-flex","justify-content-start","align-items-center","mt-3"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["type","button","routerLink","/auth/login","mat-button","","color","accent",1,"ml-3"],[1,"mt-3"],["diameter","20"]],template:function(n,r){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card",2),t.TgZ(3,"mat-card-header"),t.TgZ(4,"mat-card-title"),t._uU(5," Create An Account "),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"form",3),t.NdJ("submit",function(){return r.register()}),t.TgZ(8,"mat-form-field",4),t.TgZ(9,"mat-label"),t._uU(10,"Register Type"),t.qZA(),t.TgZ(11,"mat-select",5),t.TgZ(12,"mat-option",6),t._uU(13,"Patient"),t.qZA(),t.TgZ(14,"mat-option",6),t._uU(15,"Hospital"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",7),t.TgZ(17,"mat-form-field",8),t.TgZ(18,"mat-label"),t._uU(19,"First Name"),t.qZA(),t._UZ(20,"input",9),t.qZA(),t.TgZ(21,"mat-form-field",8),t.TgZ(22,"mat-label"),t._uU(23,"Last Name"),t.qZA(),t._UZ(24,"input",10),t.qZA(),t.qZA(),t.TgZ(25,"mat-form-field",11),t.TgZ(26,"mat-label"),t._uU(27,"Email"),t.qZA(),t._UZ(28,"input",12),t.TgZ(29,"mat-hint"),t._uU(30,"Errors appear instantly!"),t.qZA(),t.YNc(31,_,2,0,"mat-error",13),t.YNc(32,J,4,0,"mat-error",13),t.qZA(),t.TgZ(33,"mat-form-field",4),t.TgZ(34,"mat-label"),t._uU(35,"Date Of Birth"),t.qZA(),t._UZ(36,"input",14),t._UZ(37,"mat-datepicker-toggle",15),t._UZ(38,"mat-datepicker",null,16),t.qZA(),t.TgZ(40,"div",7),t.TgZ(41,"mat-form-field",8),t.TgZ(42,"mat-label"),t._uU(43,"Password"),t.qZA(),t._UZ(44,"input",17),t.qZA(),t.TgZ(45,"mat-form-field",8),t.TgZ(46,"mat-label"),t._uU(47,"Confirm Password"),t.qZA(),t._UZ(48,"input",18),t.qZA(),t.qZA(),t.TgZ(49,"div",19),t.TgZ(50,"mat-form-field",8),t.TgZ(51,"mat-label"),t._uU(52,"Address 1"),t.qZA(),t._UZ(53,"input",20),t.qZA(),t.TgZ(54,"mat-form-field",8),t.TgZ(55,"mat-label"),t._uU(56,"Address 2"),t.qZA(),t._UZ(57,"input",21),t.qZA(),t.qZA(),t.TgZ(58,"div",19),t.TgZ(59,"mat-form-field",8),t.TgZ(60,"mat-label"),t._uU(61,"State"),t.qZA(),t._UZ(62,"input",22),t.qZA(),t.TgZ(63,"mat-form-field",8),t.TgZ(64,"mat-label"),t._uU(65,"Pin Code"),t.qZA(),t._UZ(66,"input",23),t.qZA(),t.qZA(),t.YNc(67,k,5,1,"div",24),t.YNc(68,R,2,0,"div",25),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const l=t.MAs(39);let m,U;t.xp6(7),t.Q6J("formGroup",r.form),t.xp6(5),t.Q6J("value",1),t.xp6(2),t.Q6J("value",0),t.xp6(14),t.Q6J("errorStateMatcher",r.matcher),t.xp6(3),t.Q6J("ngIf",(null==(m=r.form.get("email"))?null:m.hasError("email"))&&!(null!=(m=r.form.get("email"))&&m.hasError("required"))),t.xp6(1),t.Q6J("ngIf",null==(U=r.form.get("email"))?null:U.hasError("required")),t.xp6(4),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(30),t.Q6J("ngIf",!r.isLoading),t.xp6(1),t.Q6J("ngIf",r.isLoading)}},directives:[u.a8,u.dk,u.n5,u.dn,a._Y,a.JL,a.sg,s.KE,s.hX,I.gD,a.JJ,a.u,T.ey,c.Nt,a.Fj,s.bx,g.O5,f.hl,f.nW,s.R9,f.Mq,a.wV,s.TO,Z.lW,d.rH,h.$g],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}.half-width[_ngcontent-%COMP%]{width:48%}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(M)],d.Bz]}),e})(),E=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.ez,Q,s.lN,c.c,a.UX,d.Bz,u.QW,Z.ot,f.FA,T.XK,I.LD,T.Ng,h.Cq]]}),e})()}}]);