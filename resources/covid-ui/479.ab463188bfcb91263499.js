"use strict";(self.webpackChunkcovid_killer=self.webpackChunkcovid_killer||[]).push([[479],{3479:(Mt,I,s)=>{s.r(I),s.d(I,{BookingModule:()=>Dt});var m=s(8583),R=s(4655),h=s(625),p=s(7636),t=s(7716),b=s(2458),F=s(946),_=s(9765),J=s(1439),G=s(5917),T=s(5435),D=s(5257),H=s(9761),y=s(521),c=s(7238),w=s(6461),L=s(9238);function Q(i,n){}class x{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const V={dialogContainer:(0,c.X$)("dialogContainer",[(0,c.SB)("void, exit",(0,c.oB)({opacity:0,transform:"scale(0.7)"})),(0,c.SB)("enter",(0,c.oB)({transform:"none"})),(0,c.eR)("* => enter",(0,c.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,c.oB)({transform:"none",opacity:1}))),(0,c.eR)("* => void, * => exit",(0,c.jt)("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",(0,c.oB)({opacity:0})))])};let W=(()=>{class i extends p.en{constructor(e,o,a,l,d,u){super(),this._elementRef=e,this._focusTrapFactory=o,this._changeDetectorRef=a,this._config=d,this._focusMonitor=u,this._animationStateChanged=new t.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=g=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(g)),this._ariaLabelledBy=d.ariaLabelledBy||null,this._document=l}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const o=(0,y.ht)(),a=this._elementRef.nativeElement;(!o||o===this._document.body||o===a||a.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=(0,y.ht)())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,o=(0,y.ht)();return e===o||e.contains(o)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.SBq),t.Y36(L.qV),t.Y36(t.sBO),t.Y36(m.K0,8),t.Y36(x),t.Y36(L.tE))},i.\u0275dir=t.lG2({type:i,viewQuery:function(e,o){if(1&e&&t.Gf(p.Pl,7),2&e){let a;t.iGM(a=t.CRH())&&(o._portalOutlet=a.first)}},features:[t.qOj]}),i})(),z=(()=>{class i extends W{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:o}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:o})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:o}))}_onAnimationStart({toState:e,totalTime:o}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:o}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:o})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let n;return function(o){return(n||(n=t.n5z(i)))(o||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,o){1&e&&t.WFA("@dialogContainer.start",function(l){return o._onAnimationStart(l)})("@dialogContainer.done",function(l){return o._onAnimationDone(l)}),2&e&&(t.Ikx("id",o._id),t.uIk("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledBy)("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),t.d8E("@dialogContainer",o._state))},features:[t.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,o){1&e&&t.YNc(0,Q,0,0,"ng-template",0)},directives:[p.Pl],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[V.dialogContainer]}}),i})(),$=0;class C{constructor(n,e,o="mat-dialog-"+$++){this._overlayRef=n,this._containerInstance=e,this.id=o,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new _.xQ,this._afterClosed=new _.xQ,this._beforeClosed=new _.xQ,this._state=0,e._id=o,e._animationStateChanged.pipe((0,T.h)(a=>"opened"===a.state),(0,D.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe((0,T.h)(a=>"closed"===a.state),(0,D.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),n.keydownEvents().pipe((0,T.h)(a=>a.keyCode===w.hY&&!this.disableClose&&!(0,w.Vb)(a))).subscribe(a=>{a.preventDefault(),M(this,"keyboard")}),n.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():M(this,"mouse")})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe((0,T.h)(e=>"closing"===e.state),(0,D.q)(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(n){let e=this._getPositionStrategy();return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(n="",e=""){return this._overlayRef.updateSize({width:n,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(n){return this._overlayRef.addPanelClass(n),this}removePanelClass(n){return this._overlayRef.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function M(i,n,e){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=n),i.close(e)}const U=new t.OlP("MatDialogData"),X=new t.OlP("mat-dialog-default-options"),N=new t.OlP("mat-dialog-scroll-strategy"),tt={provide:N,deps:[h.aV],useFactory:function(i){return()=>i.scrollStrategies.block()}};let et=(()=>{class i{constructor(e,o,a,l,d,u,g,yt,xt){this._overlay=e,this._injector=o,this._defaultOptions=a,this._parentDialog=l,this._overlayContainer=d,this._dialogRefConstructor=g,this._dialogContainerType=yt,this._dialogDataToken=xt,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new _.xQ,this._afterOpenedAtThisLevel=new _.xQ,this._ariaHiddenElements=new Map,this.afterAllClosed=(0,J.P)(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe((0,H.O)(void 0))),this._scrollStrategy=u}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,o){(o=function(i,n){return Object.assign(Object.assign({},n),i)}(o,this._defaultOptions||new x)).id&&this.getDialogById(o.id);const a=this._createOverlay(o),l=this._attachDialogContainer(a,o),d=this._attachDialogContent(e,l,a,o);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.afterClosed().subscribe(()=>this._removeOpenDialog(d)),this.afterOpened.next(d),l._initializeWithAttachedContent(),d}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(o=>o.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const o=this._getOverlayConfig(e);return this._overlay.create(o)}_getOverlayConfig(e){const o=new h.X_({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(o.backdropClass=e.backdropClass),o}_attachDialogContainer(e,o){const l=t.zs3.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:x,useValue:o}]}),d=new p.C5(this._dialogContainerType,o.viewContainerRef,l,o.componentFactoryResolver);return e.attach(d).instance}_attachDialogContent(e,o,a,l){const d=new this._dialogRefConstructor(a,o,l.id);if(e instanceof t.Rgc)o.attachTemplatePortal(new p.UE(e,null,{$implicit:l.data,dialogRef:d}));else{const u=this._createInjector(l,d,o),g=o.attachComponentPortal(new p.C5(e,l.viewContainerRef,u));d.componentInstance=g.instance}return d.updateSize(l.width,l.height).updatePosition(l.position),d}_createInjector(e,o,a){const l=e&&e.viewContainerRef&&e.viewContainerRef.injector,d=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:o}];return e.direction&&(!l||!l.get(F.Is,null,t.XFs.Optional))&&d.push({provide:F.Is,useValue:{value:e.direction,change:(0,G.of)()}}),t.zs3.create({parent:l||this._injector,providers:d})}_removeOpenDialog(e){const o=this.openDialogs.indexOf(e);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,l)=>{a?l.setAttribute("aria-hidden",a):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const o=e.parentElement.children;for(let a=o.length-1;a>-1;a--){let l=o[a];l!==e&&"SCRIPT"!==l.nodeName&&"STYLE"!==l.nodeName&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let o=e.length;for(;o--;)e[o].close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.aV),t.Y36(t.zs3),t.Y36(void 0),t.Y36(void 0),t.Y36(h.Xj),t.Y36(void 0),t.Y36(t.DyG),t.Y36(t.DyG),t.Y36(t.OlP))},i.\u0275dir=t.lG2({type:i}),i})(),Z=(()=>{class i extends et{constructor(e,o,a,l,d,u,g){super(e,o,l,u,g,d,C,z,U)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(h.aV),t.LFG(t.zs3),t.LFG(m.Ye,8),t.LFG(X,8),t.LFG(N),t.LFG(i,12),t.LFG(h.Xj))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac}),i})(),nt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=t.lG2({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),i})(),at=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[Z,tt],imports:[[h.U8,p.eL,b.BQ],b.BQ]}),i})();var r=s(3679),lt=s(6782),Y=s(2340),S=s(7556),k=s(1841),st=s(6458),B=s(1095),j=s(6627),f=s(8295),P=s(7441),q=s(9983),A=s(3220),O=s(4885);function rt(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("",null==e.data||null==e.data.bed?null:e.data.bed.available," Beds are available")}}function dt(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("",null==e.data||null==e.data.ventilator?null:e.data.ventilator.available," Ventilators are available")}}function ct(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("",null==e.data||null==e.data.oxygen?null:e.data.oxygen.available," Oxygen are available")}}function ut(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij("",null==e.data||null==e.data.isolation?null:e.data.isolation.available," Isolation Wards are available")}}function gt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",21),t.TgZ(1,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw().dialogRef.close()}),t._uU(2,"Cancel"),t.qZA(),t.TgZ(3,"button",23),t._uU(4,"Book Now"),t.qZA(),t.qZA()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("disabled",e.form.invalid)}}function ht(i,n){1&i&&(t.TgZ(0,"div",24),t._UZ(1,"mat-spinner",25),t.qZA())}let pt=(()=>{class i{constructor(e,o,a,l,d){this.dialogRef=e,this.data=o,this.auth=a,this.httpClient=l,this.snackBar=d,this.form=new r.cw({userId:new r.NI(null,r.kI.required),hospitalId:new r.NI(null,r.kI.required),bookingType:new r.NI("BED",r.kI.required),quantity:new r.NI(1,r.kI.required),bookingDate:new r.NI(new Date,r.kI.required)}),this.isLoading=!1,this.unsubscribe$=new _.xQ}ngOnInit(){this.auth.user$.pipe((0,lt.R)(this.unsubscribe$)).subscribe(e=>{e&&e.id&&this.form.patchValue({userId:null==e?void 0:e.id,hospitalId:this.data.id})})}submit(){this.form.value.bookingDate=new Date(this.form.value.bookingDate).toUTCString(),this.isLoading=!0,this.httpClient.post(`${Y.N.apiURL}/bookings`,this.form.value).subscribe(e=>{console.log(e),this.isLoading=!1,this.dialogRef.close(e.data),this.snackBar.open(`${e.message}`,"",{duration:3e3,verticalPosition:"top"})},e=>{console.log(e),this.isLoading=!1})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(C),t.Y36(U),t.Y36(S.e),t.Y36(k.eN),t.Y36(st.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-booking-dialog"]],decls:44,vars:10,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"mb-0"],["mat-icon-button","",3,"click"],[3,"formGroup","submit"],[1,"d-flex","justify-content-start","align-items-center"],[1,"d-flex","justify-content-start","align-items-center","mt-3"],["appearance","fill",1,"half-width"],["formControlName","bookingType"],["value","BED"],["value","VENTILATOR"],["value","OXYGEN"],["value","ISOLATION"],["appearance","fill",1,"half-width","ml-3"],["type","number","formControlName","quantity","matInput","","placeholder","No.of Units"],[4,"ngIf"],["appearance","fill",1,"example-full-width","mt-3"],["matInput","","formControlName","bookingDate",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["class","d-flex justify-content-start align-items-center mt-3 mb-1",4,"ngIf"],["class","mt-3 mb-1",4,"ngIf"],[1,"d-flex","justify-content-start","align-items-center","mt-3","mb-1"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"ml-3",3,"disabled"],[1,"mt-3","mb-1"],["diameter","20"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Booking"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return o.dialogRef.close()}),t.TgZ(4,"mat-icon"),t._uU(5,"close"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"mat-dialog-content"),t.TgZ(7,"form",3),t.NdJ("submit",function(){return o.submit()}),t.TgZ(8,"div",4),t.TgZ(9,"h4"),t._uU(10,"Hospital Name: "),t.TgZ(11,"b"),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",5),t.TgZ(14,"mat-form-field",6),t.TgZ(15,"mat-label"),t._uU(16,"Facility Type"),t.qZA(),t.TgZ(17,"mat-select",7),t.TgZ(18,"mat-option",8),t._uU(19,"Beds"),t.qZA(),t.TgZ(20,"mat-option",9),t._uU(21,"Ventilators"),t.qZA(),t.TgZ(22,"mat-option",10),t._uU(23,"Oxygen Wards"),t.qZA(),t.TgZ(24,"mat-option",11),t._uU(25,"Isolation Wards"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-form-field",12),t.TgZ(27,"mat-label"),t._uU(28,"No.of Units"),t.qZA(),t._UZ(29,"input",13),t.TgZ(30,"mat-hint"),t.YNc(31,rt,2,1,"span",14),t.YNc(32,dt,2,1,"span",14),t.YNc(33,ct,2,1,"span",14),t.YNc(34,ut,2,1,"span",14),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"mat-form-field",15),t.TgZ(36,"mat-label"),t._uU(37,"Booking Date"),t.qZA(),t._UZ(38,"input",16),t._UZ(39,"mat-datepicker-toggle",17),t._UZ(40,"mat-datepicker",null,18),t.qZA(),t.YNc(42,gt,5,1,"div",19),t.YNc(43,ht,2,0,"div",20),t.qZA(),t.qZA()),2&e){const a=t.MAs(41);let l,d,u,g;t.xp6(7),t.Q6J("formGroup",o.form),t.xp6(5),t.Oqu(o.data.name),t.xp6(19),t.Q6J("ngIf","BED"===(null==(l=o.form.get("bookingType"))?null:l.value)),t.xp6(1),t.Q6J("ngIf","VENTILATOR"===(null==(d=o.form.get("bookingType"))?null:d.value)),t.xp6(1),t.Q6J("ngIf","OXYGEN"===(null==(u=o.form.get("bookingType"))?null:u.value)),t.xp6(1),t.Q6J("ngIf","ISOLATION"===(null==(g=o.form.get("bookingType"))?null:g.value)),t.xp6(4),t.Q6J("matDatepicker",a),t.xp6(1),t.Q6J("for",a),t.xp6(3),t.Q6J("ngIf",!o.isLoading),t.xp6(1),t.Q6J("ngIf",o.isLoading)}},directives:[B.lW,j.Hw,nt,r._Y,r.JL,r.sg,f.KE,f.hX,P.gD,r.JJ,r.u,b.ey,r.wV,r.Fj,q.Nt,f.bx,m.O5,A.hl,A.nW,f.R9,A.Mq,O.$g],styles:[".half-width[_ngcontent-%COMP%]{width:49%}.example-full-width[_ngcontent-%COMP%]{width:100%}"]}),i})();var v=s(3738);function ft(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return a.filterForm.reset(),a.getHospitals()}),t._uU(1," Clear Search "),t.qZA()}}function mt(i,n){if(1&i&&(t.TgZ(0,"div",11),t.TgZ(1,"button",12),t._uU(2," Search "),t.qZA(),t.YNc(3,ft,2,0,"button",13),t.qZA()),2&i){const e=n.ngIf;t.xp6(1),t.Q6J("disabled",!e.hospital&&!e.pinCode&&!e.address),t.xp6(2),t.Q6J("ngIf",e.hospital||e.pinCode||e.address)}}function _t(i,n){1&i&&t._UZ(0,"mat-spinner",17)}function vt(i,n){if(1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",15),t.YNc(3,_t,1,0,"mat-spinner",16),t.TgZ(4,"span"),t._uU(5,"Loading Hospitals List..."),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.isLoading)}}function bt(i,n){1&i&&(t.TgZ(0,"div",21),t._uU(1," No Bookings Found "),t.qZA())}function Tt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-header"),t.TgZ(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"div",22),t.TgZ(8,"p",22),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",23),t.TgZ(11,"div",24),t.TgZ(12,"h4",25),t._uU(13,"Beds"),t.qZA(),t.TgZ(14,"p",22),t.TgZ(15,"span"),t._uU(16,"Total: "),t.TgZ(17,"b"),t._uU(18),t.qZA(),t.qZA(),t.TgZ(19,"span",26),t._uU(20,"Available: "),t.TgZ(21,"b"),t._uU(22),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",24),t.TgZ(24,"h4",25),t._uU(25,"Ventilators"),t.qZA(),t.TgZ(26,"p",22),t.TgZ(27,"span"),t._uU(28,"Total: "),t.TgZ(29,"b"),t._uU(30),t.qZA(),t.qZA(),t.TgZ(31,"span",26),t._uU(32,"Available: "),t.TgZ(33,"b"),t._uU(34),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(35,"div",24),t.TgZ(36,"h4",25),t._uU(37,"Oxygen Beds"),t.qZA(),t.TgZ(38,"p",22),t.TgZ(39,"span"),t._uU(40,"Total: "),t.TgZ(41,"b"),t._uU(42),t.qZA(),t.qZA(),t.TgZ(43,"span",26),t._uU(44,"Available: "),t.TgZ(45,"b"),t._uU(46),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",24),t.TgZ(48,"h4",25),t._uU(49,"Isolation Wards"),t.qZA(),t.TgZ(50,"p",22),t.TgZ(51,"span"),t._uU(52,"Total: "),t.TgZ(53,"b"),t._uU(54),t.qZA(),t.qZA(),t.TgZ(55,"span",26),t._uU(56,"Available: "),t.TgZ(57,"b"),t._uU(58),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",27),t.TgZ(60,"button",28),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).bookNow(l)}),t._uU(61,"Book Now"),t.qZA(),t.TgZ(62,"p",29),t._uU(63,"Need to Talk?? call "),t.TgZ(64,"a",30),t._uU(65),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&i){const e=n.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(2),t.AsE("",e.address,", ",e.pinCode,""),t.xp6(4),t.Oqu(e.description),t.xp6(9),t.Oqu(null==e.bed?null:e.bed.total),t.xp6(4),t.Oqu(null==e.bed?null:e.bed.available),t.xp6(8),t.Oqu(null==e.ventilator?null:e.ventilator.total),t.xp6(4),t.Oqu(null==e.ventilator?null:e.ventilator.available),t.xp6(8),t.Oqu(null==e.oxygen?null:e.oxygen.total),t.xp6(4),t.Oqu(null==e.oxygen?null:e.oxygen.available),t.xp6(8),t.Oqu(null==e.isolation?null:e.isolation.total),t.xp6(4),t.Oqu(null==e.isolation?null:e.isolation.available),t.xp6(6),t.MGl("href","tel:",null==e?null:e.phone,"",t.LSH),t.xp6(1),t.Oqu(null==e?null:e.phone)}}function Ct(i,n){if(1&i&&(t.TgZ(0,"div",0),t.TgZ(1,"div",18),t.YNc(2,bt,2,0,"div",19),t.YNc(3,Tt,66,14,"mat-card",20),t.qZA(),t.qZA()),2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",!(null!=e.hospitals&&e.hospitals.length)),t.xp6(1),t.Q6J("ngForOf",e.hospitals)}}const Zt=[{path:"",component:(()=>{class i{constructor(e,o,a){this.auth=e,this.dialog=o,this.httpClient=a,this.hospitals=[],this.isLoading=!1,this.filterForm=new r.cw({hospital:new r.NI(null),address:new r.NI(null),pinCode:new r.NI(null)})}ngOnInit(){this.getHospitals()}getHospitals(){this.isLoading=!0,this.filterForm.disable();let e=new k.LE;Object.keys(this.filterForm.value).forEach(o=>{this.filterForm.value[o]&&(e=e.append(o,this.filterForm.value[o]))}),this.httpClient.get(`${Y.N.apiURL}/hospitals`,{params:e}).subscribe(o=>{console.log(o),this.isLoading=!1,this.filterForm.enable(),setTimeout(()=>this.isLoading=!1,1e3),o.data&&(this.hospitals=o.data)},o=>{this.isLoading=!1,this.filterForm.enable(),console.log(o)})}bookNow(e){this.dialog.open(pt,{data:e,width:"600px"}).afterClosed().subscribe(o=>{if(o){const a=this.hospitals.find(l=>l.id===o.hospitalId);if(a){const l=a[o.bookingType.toLowerCase()];l&&(a[o.bookingType.toLowerCase()].available=l.available-o.quantity)}}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(S.e),t.Y36(Z),t.Y36(k.eN))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-booking"]],decls:27,vars:4,consts:[[1,"row"],[1,"col-lg-12"],[3,"formGroup","submit"],[1,"mb-3"],[1,"col-lg-3"],["appearance","fill",1,"example-full-width","mt-3"],["type","text","matInput","","formControlName","hospital","placeholder","Hospital Search"],["type","text","matInput","","formControlName","address","placeholder","Address Search"],["type","text","matInput","","formControlName","pinCode","placeholder","PinCode"],["class","mt-4",4,"ngIf"],["class","row",4,"ngIf"],[1,"mt-4"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","type","button","class","ml-3",3,"click",4,"ngIf"],["mat-raised-button","","type","button",1,"ml-3",3,"click"],[1,"d-flex","justify-content-start","align-items-center"],["diameter","20","class","mr-2",4,"ngIf"],["diameter","20",1,"mr-2"],[1,"col-lg-12","mb-5"],["class","d-flex justify-content-start align-items-center text-secondary",4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-start","align-items-center","text-secondary"],[1,""],[1,"d-flex","justify-content-between","align-items-center","mt-3"],[1,"item"],[1,"text-secondary","text-center"],[1,"ml-2"],[1,"d-flex","justify-content-start","align-items-center","mt-3"],["mat-raised-button","","color","accent",3,"click"],[1,"mb-0","ml-3"],[3,"href"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"h1"),t._uU(3,"Booking Page"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(4,"form",2),t.NdJ("submit",function(){return o.getHospitals()}),t.TgZ(5,"mat-card",3),t.TgZ(6,"mat-card-content"),t.TgZ(7,"div",0),t.TgZ(8,"div",4),t.TgZ(9,"mat-form-field",5),t.TgZ(10,"mat-label"),t._uU(11,"Hospital Search"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.qZA(),t.TgZ(13,"div",4),t.TgZ(14,"mat-form-field",5),t.TgZ(15,"mat-label"),t._uU(16,"Address Search"),t.qZA(),t._UZ(17,"input",7),t.qZA(),t.qZA(),t.TgZ(18,"div",4),t.TgZ(19,"mat-form-field",5),t.TgZ(20,"mat-label"),t._uU(21,"PinCode"),t.qZA(),t._UZ(22,"input",8),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.YNc(24,mt,4,2,"div",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(25,vt,6,1,"div",10),t.YNc(26,Ct,4,2,"div",10)),2&e&&(t.xp6(4),t.Q6J("formGroup",o.filterForm),t.xp6(20),t.Q6J("ngIf",o.filterForm.value),t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},directives:[r._Y,r.JL,r.sg,v.a8,v.dn,f.KE,f.hX,q.Nt,r.Fj,r.JJ,r.u,m.O5,B.lW,O.$g,m.sg,v.dk,v.n5,v.$j],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%}"]}),i})()}];let At=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[R.Bz.forChild(Zt)],R.Bz]}),i})(),Dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,At,v.QW,B.ot,f.lN,q.c,at,j.Ps,P.LD,r.UX,O.Cq,b.XK,A.FA]]}),i})()}}]);